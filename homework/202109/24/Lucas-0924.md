## 消除热点，P205-209，0924
- 大量读写一个键，请求被路由到同一分区
- 解决办法，在主键前或结尾加上随机数
- 但是读取的时候需要合并，所以只能对热点键拆分

## 分片和次级索引
- 不只是通过主键访问，次级索引是Solr和Elasticsearch的基石
- HBase，Voldemort 因为复杂度放弃了二级索引
- 基于文档的分区，本地索引，每个分区维护自己的二级索引，
- 查询需要发送到所有分区，分散聚集，scatter/gather，查询成本大，尾部坚持放大？
- MonDBDB，Riak，Cassandra，Elasticsearch，SolrCloud,VoltDB 会使用
- 基于关键词的分区，全局索引，覆盖所有分区数据
- 全局索引也会被按照本身或哈希进行分区，因为全局所以写入慢
- 因为慢所以异步，最近的修改可能搜索不出来，全局次级索引应该在一秒内更新
- Riak，Oracle 允许自行选择本地索引和全局索引
- TODO-Ch12：关键字的二级索引
