## 节点宕机时数据写入 P177 - P181, 0920
- 三个副本，一个宕机，主机配置为啥要执行故障切换？
- 无主配置，无需切换
- 节点宕机无法写入，读取时数据过时
- 解决办法，并发读请求，版本号确定最新值
- 读修复，比较得到最新版本，然后写入过期节点
- 反熵，后台进程持续检查副本之间的差异，用Markle树

## 读写的法定人数
- n个副本，写入w个节点才成功，每次读r个节点
- w + r > n，w 为读写的法定人数
- 写入读多，w = n, r = 1
- w < n，某些节点宕机，整个系统仍可写
- r < n，某些节点宕机，整个系统仍可读
- 可接受 n - w 个节点宕机


