## ACID, P225-230, 0928
- 隔离性 Isolation，支持并发，同时执行的事务应该是相互隔离的
- 序列化可以实现隔离化，但是性能太差
- 持久性 Durability，使用预写式日志实现，TODO-让B树更可靠
- 持久性不一致完美支持，比如在异步复制的数据库中，主库不可用的时候，可能会丢失最近的写入

## 图7-1 隔离性 - 数据丢失
- 客户端1 读取 42
- 客户端2 读取 42
- 客户端1 增加计数 43
- 客户端2 增加计数 43， 丢失了客户端1 的修改

## 单对象 vs 多对象
- 原子性，all-or-nothing
- 隔离性，同时执行的事务互不干扰
- 多对象事务需要明确哪些读写属于同一个事务
- 单对象读写是适用于事务
- 比较和设置，CAS，CompareAndSet，无锁操作，戏称为轻量级事务
- 多对象事务无法跨区
- 无主复制在处理错误和中止的时候，需要应用程序的介入

## 图7-2 隔离性示例 - 脏读
- 客户端1 启动事务1，插入信件
- 客户端2 启动事务2 查询信件
- 客户端2 查询未读数，结束事务2
- 客户端1 更新未读邮件数，结束事务1

## 图7-3 原子性保证事务失败的时候数据一致性
